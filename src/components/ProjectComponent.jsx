import "../styles/projects.css"
import house from "../assets/images/house.png"
import {Link} from "react-router-dom";
const ProjectComponent = ({project,chosenCurrency}) => {
    const handleNextClick = () => {
        history.push('/object-info'); // Replace with the desired route
    };
    if (!project) {
        // Render nothing when project is undefined
        return null;
    }
    function getPaymentPercentString(paymentPlans) {
        // Define the order of priority for plans
        const planPriority = ["Studio", "1", "2", "3", "4+"];
        const availablePercentages = [];

        for (const plan of planPriority) {
            if (paymentPlans[plan]) {
                const planData = paymentPlans[plan];
                for (let i = 1; i <= 4; i++) {
                    const percentKey = `percent${i}`;
                    if (planData[percentKey] !== null) {
                        availablePercentages.push(planData[percentKey]);
                    }
                }
                break;
            }
        }

        if (availablePercentages.length === 0) {
            return "No available percentages";
        }

        // Join the available percentages into a string
        return availablePercentages.join("/");
    }

    function formatNumberWithCommas(value) {
        // Remove existing commas, format, and add a single comma
        return value.replace(/,/g, '').replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }
    return(<div className={"project-component-container"}>

        <div className="image-container" style={{
            backgroundImage: `
    linear-gradient(1deg, rgba(0, 0, 0, 0.60) 15.72%, rgba(0, 0, 0, 0.00) 91.54%), 
    url(${project.imageSrcMain})
  `,
            backgroundSize: '100% 127.409%, 100% 100%, cover',
            backgroundPosition: '0 0, 0 0, center',
            backgroundRepeat: 'no-repeat, no-repeat, no-repeat',
            borderRadius:8
        }}>
            {chosenCurrency==='AED'?
                <div className="price-text">AED {formatNumberWithCommas(project.priceFrom)}</div>:
                <div className="price-text">$ {formatNumberWithCommas((Number(project.priceFrom) / 3.67).toFixed(0))}</div>}
                <div className="name-text">
                    <span className={"name"}>{project.projectName} </span>
                    <span className={"location"}>{project.selectedLocation || project.ownLocation}</span>
                </div>
        </div>
        <div className="info-container">

            <div className="info-container-blocks">
                <div className="info-block">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M9.37486 8.74992V6.04159H7.91653C7.11319 6.04159 6.57355 6.04291 6.17102 6.09703C5.78647 6.14873 5.62189 6.23809 5.51329 6.34668C5.40469 6.45528 5.31534 6.61986 5.26364 7.00441C5.20952 7.40694 5.20819 7.94658 5.20819 8.74992L9.37486 8.74992Z" fill="#407BFF"/>
                        <path d="M14.7915 8.74992C14.7915 7.94658 14.7902 7.40694 14.7361 7.00441C14.6844 6.61986 14.595 6.45528 14.4864 6.34668C14.3778 6.23809 14.2133 6.14873 13.8287 6.09703C13.4262 6.04291 12.8865 6.04159 12.0832 6.04159H10.6249V8.74992L14.7915 8.74992Z" fill="#407BFF"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M10.8332 3.33325H9.16653C6.02383 3.33325 4.45248 3.33325 3.47617 4.30956C2.62411 5.16162 2.51567 6.4669 2.50187 8.87439V10.222C2.18492 10.4044 1.93484 10.6873 1.79337 11.0288C1.6665 11.3351 1.6665 11.7233 1.6665 12.4999C1.6665 13.2765 1.6665 13.6648 1.79337 13.9711C1.96253 14.3794 2.28698 14.7039 2.69536 14.8731C2.90569 14.9602 3.15467 14.9875 3.5415 14.996V16.6666C3.5415 17.0118 3.82133 17.2916 4.1665 17.2916C4.51168 17.2916 4.7915 17.0118 4.7915 16.6666V14.9999H15.2082V16.6666C15.2082 17.0118 15.488 17.2916 15.8332 17.2916C16.1783 17.2916 16.4582 17.0118 16.4582 16.6666V14.996C16.845 14.9875 17.094 14.9602 17.3043 14.8731C17.7127 14.7039 18.0371 14.3794 18.2063 13.9711C18.3332 13.6648 18.3332 13.2765 18.3332 12.4999C18.3332 11.7233 18.3332 11.3351 18.2063 11.0288C18.0648 10.6873 17.8148 10.4044 17.4978 10.2221V8.87438C17.484 6.4669 17.3756 5.16162 16.5235 4.30956C15.5472 3.33325 13.9759 3.33325 10.8332 3.33325ZM16.0415 10V8.70657C16.0416 7.95788 16.0416 7.33348 15.9749 6.83785C15.9046 6.31469 15.7499 5.84236 15.3703 5.4628C14.9908 5.08324 14.5184 4.92852 13.9953 4.85818C13.4996 4.79154 12.8753 4.79156 12.1265 4.79159H7.8732C7.12446 4.79156 6.50011 4.79154 6.00446 4.85818C5.4813 4.92852 5.00897 5.08324 4.62941 5.4628C4.24985 5.84236 4.09512 6.31469 4.02479 6.83785C3.95815 7.33351 3.95817 7.95785 3.95819 8.70659V10C4.02439 9.99992 4.09374 9.99992 4.1665 9.99992H15.8332C15.906 9.99992 15.9753 9.99992 16.0415 10Z" fill="#407BFF"/>
                    </svg>
                    {project.selectedBedrooms}
                </div>
                <div className="info-block">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M18.3332 6.91128C18.3332 9.80775 15.9755 12.1558 13.0671 12.1558C12.5364 12.1558 11.3281 12.0338 10.7403 11.546L10.0054 12.2778C9.57341 12.7081 9.69008 12.8347 9.88227 13.0434C9.96246 13.1305 10.0558 13.2318 10.1279 13.3755C10.1279 13.3755 10.7402 14.2292 10.1279 15.083C9.76051 15.5708 8.73179 16.2539 7.55612 15.083L7.31119 15.3269C7.31119 15.3269 8.04598 16.1807 7.43365 17.0344C7.06626 17.5223 6.08653 18.0102 5.22926 17.1564L4.372 18.0102C3.78416 18.5956 3.06572 18.2541 2.77997 18.0102L2.04518 17.2784C1.35936 16.5954 1.75942 15.8554 2.04518 15.5708L8.41341 9.22863C8.41341 9.22863 7.80108 8.2529 7.80108 6.91128C7.80108 4.0148 10.1588 1.66675 13.0671 1.66675C15.9755 1.66675 18.3332 4.0148 18.3332 6.91128ZM13.0673 8.74084C14.0818 8.74084 14.9043 7.92175 14.9043 6.91136C14.9043 5.90096 14.0818 5.08187 13.0673 5.08187C12.0528 5.08187 11.2303 5.90096 11.2303 6.91136C11.2303 7.92175 12.0528 8.74084 13.0673 8.74084Z" fill="#407BFF"/>
                    </svg>
                    Q{project.selectedMonth} 20{project.selectedYear}
                </div>
                <div className="info-block">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M7.99351 2.66697C7.79057 2.83992 7.68909 2.9264 7.58072 2.99903C7.3323 3.16553 7.05332 3.28109 6.75992 3.33902C6.63193 3.36429 6.49903 3.37489 6.23324 3.3961C5.56542 3.44939 5.23151 3.47604 4.95293 3.57444C4.3086 3.80202 3.80178 4.30884 3.57419 4.95317C3.4758 5.23175 3.44915 5.56566 3.39586 6.23348C3.37465 6.49928 3.36404 6.63217 3.33877 6.76016C3.28085 7.05356 3.16529 7.33255 2.99879 7.58097C2.92615 7.68934 2.83968 7.79081 2.66673 7.99375C2.2322 8.50365 2.01492 8.75861 1.88752 9.02517C1.59283 9.64171 1.59283 10.3585 1.88752 10.975C2.01493 11.2416 2.23219 11.4965 2.66673 12.0064C2.83966 12.2093 2.92615 12.3108 2.99879 12.4192C3.16529 12.6676 3.28085 12.9466 3.33877 13.24C3.36404 13.368 3.37465 13.5009 3.39586 13.7667C3.44915 14.4345 3.4758 14.7684 3.57419 15.047C3.80178 15.6913 4.30859 16.1981 4.95293 16.4257C5.23151 16.5241 5.56542 16.5508 6.23324 16.6041C6.49903 16.6253 6.63193 16.6359 6.75992 16.6611C7.05332 16.7191 7.3323 16.8346 7.58072 17.0011C7.68909 17.0738 7.79056 17.1602 7.99351 17.3332C8.50341 17.7677 8.75836 17.985 9.02493 18.1124C9.64147 18.4071 10.3582 18.4071 10.9747 18.1124C11.2413 17.985 11.4963 17.7677 12.0062 17.3332C12.2091 17.1602 12.3106 17.0738 12.419 17.0011C12.6674 16.8346 12.9464 16.7191 13.2398 16.6611C13.3677 16.6359 13.5006 16.6253 13.7664 16.6041C14.4343 16.5508 14.7682 16.5241 15.0468 16.4257C15.6911 16.1981 16.1979 15.6913 16.4255 15.047C16.5239 14.7684 16.5505 14.4345 16.6038 13.7667C16.625 13.5009 16.6356 13.368 16.6609 13.24C16.7188 12.9466 16.8344 12.6676 17.0009 12.4192C17.0735 12.3108 17.16 12.2094 17.3329 12.0064C17.7675 11.4965 17.9848 11.2416 18.1122 10.975C18.4068 10.3585 18.4068 9.64171 18.1122 9.02517C17.9848 8.75861 17.7675 8.50366 17.3329 7.99375C17.16 7.79081 17.0735 7.68934 17.0009 7.58097C16.8344 7.33255 16.7188 7.05356 16.6609 6.76017C16.6356 6.63217 16.625 6.49928 16.6038 6.23348C16.5505 5.56566 16.5239 5.23175 16.4255 4.95317C16.1979 4.30884 15.6911 3.80202 15.0467 3.57444C14.7682 3.47604 14.4343 3.44939 13.7664 3.3961C13.5006 3.37489 13.3677 3.36429 13.2398 3.33902C12.9464 3.28109 12.6674 3.16553 12.419 2.99903C12.3106 2.92639 12.2091 2.83992 12.0062 2.66697C11.4963 2.23244 11.2413 2.01517 10.9747 1.88776C10.3582 1.59308 9.64146 1.59308 9.02493 1.88776C8.75836 2.01517 8.50341 2.23244 7.99351 2.66697ZM13.6444 8.21936C13.9093 7.9545 13.9093 7.52508 13.6444 7.26022C13.3795 6.99536 12.9501 6.99536 12.6853 7.26022L8.64339 11.3021L7.31439 9.97308C7.04953 9.70823 6.6201 9.70823 6.35524 9.97308C6.09038 10.2379 6.09038 10.6674 6.35524 10.9322L8.16382 12.7408C8.42868 13.0057 8.8581 13.0057 9.12297 12.7408L13.6444 8.21936Z" fill="#407BFF"/>
                    </svg>
                    {getPaymentPercentString(project.paymentPlans)}
                </div>
            </div>
            <div className="next" onClick={()=>history.push('/object-info')}>
                <Link to={`/object-info/${project._id}`}>


                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.3335 22C17.8563 22 22.3335 17.5228 22.3335 12C22.3335 6.47715 17.8563 2 12.3335 2C6.81065 2 2.3335 6.47715 2.3335 12C2.3335 17.5228 6.81065 22 12.3335 22ZM10.3032 8.46967C10.5961 8.17678 11.0709 8.17678 11.3638 8.46967L14.3638 11.4697C14.6567 11.7626 14.6567 12.2374 14.3638 12.5303L11.3638 15.5303C11.0709 15.8232 10.5961 15.8232 10.3032 15.5303C10.0103 15.2374 10.0103 14.7626 10.3032 14.4697L12.7728 12L10.3032 9.53033C10.0103 9.23744 10.0103 8.76256 10.3032 8.46967Z" fill="#407BFF"/>
                </svg></Link>
            </div>
        </div>



    </div>)
}
export default ProjectComponent;